<?xml version="1.0" encoding="US-ASCII"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
  <!ENTITY rfc1035 PUBLIC "" "./reference.RFC.1035.xml">
  <!ENTITY rfc1995 PUBLIC "" "./reference.RFC.1995.xml">
  <!ENTITY rfc2119 PUBLIC "" "./reference.RFC.2119.xml">
  <!ENTITY rfc2845 PUBLIC "" "./reference.RFC.2845.xml">
  <!ENTITY rfc3833 PUBLIC "" "./reference.RFC.3833.xml">
  <!ENTITY rfc4034 PUBLIC "" "./reference.RFC.4034.xml">
  <!ENTITY rfc5358 PUBLIC "" "./reference.RFC.5358.xml">
]>

<rfc category="std" docName="draft-ogud-dnsop-acl-metaqueries-01"
     ipr="trust200902" updates="1035">

  <?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>

  <?rfc toc="yes" ?>
  <?rfc symrefs="yes" ?>
  <?rfc sortrefs="yes"?>
  <?rfc iprnotified="no" ?>
  <?rfc strict="yes"?>
  <?rfc compact="yes" ?>

  <front>
    <title abbrev="Refusing DNS Queries of Type ANY">
      Required Behaviour for Authoritative-Only DNS Servers that
      Refuse Meta Queries 
    </title>
   <author fullname="Olafur Gudmundsson" initials="O."
      surname="Gudmundsson">
      <organization>CloudFlare Inc.</organization>
      <address>
        <postal>
          <street></street>
          <city>San Francisco</city>
          <region>CA</region>
          <code>94107</code>
          <country>USA</country>
        </postal>
        <email>olafur@cloudflare.com</email>
      </address>
    </author>

<author fullname="Paul Wouters"> 
</author> 
<!-- Add your name here --> 
<date/> 
<area> NO clue</area> 
<workgroup> None</workgroup> 
<abstract> 
<t> 
There is a need for simple protocol to allow third party DNS operators
to talk to Registry/Registars/Reseller about domains the DNS operator
is operating. This protocol is REST based. When a authenticated
channel exists between the R* entity and the DNS operator it is
possilbe to bootstrap DNSSEC. 
</t>
<t> Once DNSSEC has been bootstrapped this protocol can also be used
 to trigger maintainance of delegation information like NS and glue
 records. This protocol is keept simple and flexible to accomondate 
 different operating models. 
</t>
<t>
We are going to talk the same protocol to all R* entities so from a
3-DNS point of view it does not matter if it is talking to
Registry, Registrar or Reseller, they will all speak the same
protocol. 
</t> 

</abstract> 
</front>


<middle> 
<section title="Introduction"> 
  <t> 
    why is this needed ? Current system does not work well
  </t> 
  <t> ADD more text</t>
  <t>
    The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
    "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
    document are to be interpreted as described in <xref target="RFC2119" />.
  </t>
</section>
<section title="Protocol"> 
  <t>
    The basic call is 
    &lt;SERVER&gt;&lt;cmd&gt;/domain/auth=""/extra-stuff 
  </t>
  <t>
    The cmd can be:
    <list style="hanging">
      <t hangText="/getDS"> install DS from CDS/CDNSKEY at domain if
      present and different from current DS set</t>
      <t hangText="/getNS">  update NS set based on the childs NS set </t>
      <t hangText="/delDS"> delete the all DS records at domain (how to authorize is a question) </t>
      <t hangText="/status"> Returns the current NS and DS + glue
	records for the domain and or any other status information</t>
    </list>
  </t>
  
  <t> 
    The commands "getDS" and "status" are required, the others a are
    RECOMMENDED. The following options to the commands are allowed
    <list style="hanging"> 
      <t hangText="auth="> an authenticaion token</t> 
      <t hangText="debug="> request a debug session </t> 
    </list>
  </t>
  
  <t>
    The basic answer is a jason blob the important parts of the blob are 
    <list style="hanging">
      <t hangText="refer:"> will contain an URI; this is an referal to
	an URI that is better able to do execute the command</t>
      <t hangText="refused:"> This command can not be executed, and
      the reason is inside the block </t> 
      <t hangText="debug:"> list of debug messages normally empty
      unless debug flag is present, this section should be ignored in
      normal processing</t>
      <t hangText="error:"> if there was one look inside debug for
      more details</t>
      <t hangText="domain:"> what domain this is an answer for this
      section MUST be included in all answers</t>
      <t hangText="rr:">  the new list of rrs "can be empty" </t>
      <t hangText="challenge:"> an RR to insert into the zone </t>
    </list>
  </t> 
  <t> If ``refer'' block is present then the client is to attempt to
  connect to that URI and retry the command there. Client SHOULD
  always honor the refer command over all other answers it gets in
  the answer.  </t> 
</section> 

<section title="Authorization"> 
  <t>
The authorization can be either based on Token (like auth code) or buy
challenge i.e. inserting a blob into the zone.  It is up to registrars
to register the referral URI with registries, or block the access to
updating DS and NS.  
</t>
</section> 
<section title="Security considerations"> 
<t>
TBD</t>
</section> 

<section title="IANA Actions"> 
<t> URI ??? TBD </t> 
</section>
<section title="Internationalization Considerations">
<t> This protcol is designed for machine to machine communications </t> 
</section> 
</middle>

<back> 
  <references title="Normative References">
      &rfc2119;
    </references>

    <references title="Informative References">
      &rfc2845;
    </references>

<section title="Document History"> 
<t> First version</t> 
</section> 
</back>
</rfc> 

